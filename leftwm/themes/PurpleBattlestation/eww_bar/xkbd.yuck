
; Flags from https://raw.githubusercontent.com/jonathas/x11-keyboard-flags/develop/flags.json
(defvar flags "{ \"af\": \"ğŸ‡¦ğŸ‡«\", \"al\": \"ğŸ‡¦ğŸ‡±\", \"dz\": \"ğŸ‡©ğŸ‡¿\", \"am\": \"ğŸ‡¦ğŸ‡²\", \"au\": \"ğŸ‡¦ğŸ‡º\", \"at\": \"ğŸ‡¦ğŸ‡¹\", \"az\": \"ğŸ‡¦ğŸ‡¿\", \"bd\": \"ğŸ‡§ğŸ‡©\", \"by\": \"ğŸ‡§ğŸ‡¾\", \"be\": \"ğŸ‡§ğŸ‡ª\", \"bt\": \"ğŸ‡§ğŸ‡¹\", \"ba\": \"ğŸ‡§ğŸ‡¦\", \"bw\": \"ğŸ‡§ğŸ‡¼\", \"br\": \"ğŸ‡§ğŸ‡·\", \"bg\": \"ğŸ‡§ğŸ‡¬\", \"kh\": \"ğŸ‡°ğŸ‡­\", \"cm\": \"ğŸ‡¨ğŸ‡²\", \"ca\": \"ğŸ‡¨ğŸ‡¦\", \"cn\": \"ğŸ‡¨ğŸ‡³\", \"cd\": \"ğŸ‡¨ğŸ‡¬\", \"hr\": \"ğŸ‡­ğŸ‡·\", \"cz\": \"ğŸ‡¨ğŸ‡¿\", \"dk\": \"ğŸ‡©ğŸ‡°\", \"ee\": \"ğŸ‡ªğŸ‡ª\", \"et\": \"ğŸ‡ªğŸ‡¹\", \"fo\": \"ğŸ‡«ğŸ‡´\", \"fi\": \"ğŸ‡«ğŸ‡®\", \"fr\": \"ğŸ‡«ğŸ‡·\", \"ga\": \"ğŸ‡¬ğŸ‡¦\", \"ge\": \"ğŸ‡¬ğŸ‡ª\", \"de\": \"ğŸ‡©ğŸ‡ª\", \"gh\": \"ğŸ‡¬ğŸ‡­\", \"gr\": \"ğŸ‡¬ğŸ‡·\", \"hu\": \"ğŸ‡­ğŸ‡º\", \"is\": \"ğŸ‡®ğŸ‡¸\", \"in\": \"ğŸ‡®ğŸ‡³\", \"id\": \"ğŸ‡®ğŸ‡©\", \"ir\": \"ğŸ‡®ğŸ‡·\", \"iq\": \"ğŸ‡®ğŸ‡¶\", \"ie\": \"ğŸ‡®ğŸ‡ª\", \"il\": \"ğŸ‡®ğŸ‡±\", \"it\": \"ğŸ‡®ğŸ‡¹\", \"jp\": \"ğŸ‡¯ğŸ‡µ\", \"kz\": \"ğŸ‡°ğŸ‡¿\", \"ke\": \"ğŸ‡°ğŸ‡ª\", \"kr\": \"ğŸ‡°ğŸ‡·\", \"kg\": \"ğŸ‡°ğŸ‡¬\", \"la\": \"ğŸ‡±ğŸ‡¦\", \"lv\": \"ğŸ‡±ğŸ‡»\", \"lt\": \"ğŸ‡±ğŸ‡¹\", \"mk\": \"ğŸ‡²ğŸ‡°\", \"my\": \"ğŸ‡²ğŸ‡¾\", \"mv\": \"ğŸ‡²ğŸ‡»\", \"ml\": \"ğŸ‡²ğŸ‡±\", \"mt\": \"ğŸ‡²ğŸ‡¹\", \"mn\": \"ğŸ‡²ğŸ‡³\", \"ma\": \"ğŸ‡²ğŸ‡¦\", \"mm\": \"ğŸ‡²ğŸ‡²\", \"np\": \"ğŸ‡³ğŸ‡µ\", \"nl\": \"ğŸ‡³ğŸ‡±\", \"ng\": \"ğŸ‡³ğŸ‡¬\", \"no\": \"ğŸ‡³ğŸ‡´\", \"pk\": \"ğŸ‡µğŸ‡°\", \"ps\": \"ğŸ‡µğŸ‡¸\", \"ph\": \"ğŸ‡µğŸ‡­\", \"pl\": \"ğŸ‡µğŸ‡±\", \"pt\": \"ğŸ‡µğŸ‡¹\", \"ro\": \"ğŸ‡·ğŸ‡´\", \"ru\": \"ğŸ‡·ğŸ‡º\", \"sn\": \"ğŸ‡¸ğŸ‡³\", \"sk\": \"ğŸ‡¸ğŸ‡°\", \"si\": \"ğŸ‡¸ğŸ‡®\", \"za\": \"ğŸ‡¿ğŸ‡¦\", \"es\": \"ğŸ‡ªğŸ‡¸\", \"lk\": \"ğŸ‡±ğŸ‡°\", \"se\": \"ğŸ‡¸ğŸ‡ª\", \"ch\": \"ğŸ‡¨ğŸ‡­\", \"sy\": \"ğŸ‡¸ğŸ‡¾\", \"tw\": \"ğŸ‡¹ğŸ‡¼\", \"tj\": \"ğŸ‡¹ğŸ‡¯\", \"tz\": \"ğŸ‡¹ğŸ‡¿\", \"th\": \"ğŸ‡¹ğŸ‡­\", \"tg\": \"ğŸ‡¹ğŸ‡¬\", \"tr\": \"ğŸ‡¹ğŸ‡·\", \"tm\": \"ğŸ‡¹ğŸ‡²\", \"ug\": \"ğŸ‡ºğŸ‡¬\", \"ua\": \"ğŸ‡ºğŸ‡¦\", \"gb\": \"ğŸ‡¬ğŸ‡§\", \"us\": \"ğŸ‡ºğŸ‡¸\", \"uz\": \"ğŸ‡ºğŸ‡¿\", \"vn\": \"ğŸ‡»ğŸ‡³\" }")
(defpoll xkblayout :interval "5s" :initial "" "./scripts/xkbd --current")

(defwidget xkeyboard []
  (box :class "module-2" :orientation "h" :space-evenly "false" :vexpand "false" :hexpand "false"
    (button :class "keyboard" :onclick "xkb-switch -n" "${flags[xkblayout]}")
  )
)

